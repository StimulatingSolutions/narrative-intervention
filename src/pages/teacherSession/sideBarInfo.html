<ion-content class="side-bar-info-content" [class.response-mode]="session?.readyForResponse">
  <ion-card>
    <ion-card-header>
      <div class="student-count" *ngIf="!session?.readyForResponse">
        Students: {{session?.activeUsers.length || 0}}
      </div>
      <div class="student-count" *ngIf="session?.readyForResponse">
        <div>
          Waiting For: {{waitCount}} <span *ngIf="session?.correctAnswer">(correct answer: <b>{{session?.correctAnswer}}</b>)</span>
        </div>
      </div>
      <div class="session-id">
        Session Code: <b>{{session?.shortId}}</b>
      </div>
      <ion-buttons class='button-container'>
        <button ion-button (click)="closeQuestion()" [class.hidden]="!session?.readyForResponse" >Done!</button>
        <button ion-button color="secondary" (click)="findMyPlace()">Find My Place</button>
        <button ion-button color='danger' (click)="exitCurrentSession()">Exit</button>
      </ion-buttons>
    </ion-card-header>
    <ion-card-content>
      <div class="student" *ngFor="let user of session?.activeUsers">

        <div [class.waitingforanswer]="session?.readyForResponse" [class.answered]="idsWithAnswer.indexOf(user) > -1" [class.incorrect]="session?.correctAnswer && session?.correctAnswer != currentResponses[user]?.response">
          <div class='answered-icon' *ngIf="session?.readyForResponse && idsWithAnswer.indexOf(user) === -1">
            <ion-icon name="radio-button-off"></ion-icon>
          </div>
          <div class='answered-icon' *ngIf="session?.readyForResponse && idsWithAnswer.indexOf(user) > -1 && (!session?.correctAnswer || session?.correctAnswer === currentResponses[user]?.response)">
            <ion-icon name="checkmark-circle"></ion-icon>
          </div>
          <div class='answered-icon' *ngIf="session?.readyForResponse && idsWithAnswer.indexOf(user) > -1 && session?.correctAnswer && session?.correctAnswer !== currentResponses[user]?.response">
            <ion-icon name="close-circle"></ion-icon>
          </div>
          <span [class.bold]="session?.readyForResponse && (idsWithAnswer.indexOf(user) === -1 || (session?.correctAnswer && session?.correctAnswer !== currentResponses[user]?.response))">
            {{user}}
          </span>
          <div class='student-response' *ngIf="session?.readyForResponse && idsWithAnswer.indexOf(user) > -1">
            {{['difficulty','appeal','efficacy'].indexOf(session.questionType) != -1 ? session.questionType+'-' : ''}}{{currentResponses[user].response.replace('utcome', '')}}
          </div>
        </div>
      </div>
      <!--
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      <div class="student">12345</div>
      -->
      <div *ngIf="session?.activeUsers.length === 0">
        <i>No students have connected to this session yet.</i>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
